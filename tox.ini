[tox]
envlist =
    molo_lint
    django{110,111,20}-testapp_lint
    django{110,111,20}-build

[testenv]
deps =
    -rrequirements-dev.txt
    django110: Django>=1.10,<1.11
    django111: Django>=1.11,<2.0
    django20: Django>=2.0,<2.1
commands =
    ./setup_testapp.sh
    pip install -e testapp
    py.test --cov

[testenv:molo_lint]
commands =
    flake8 molo
    flake8 --config=molo/core/migrations/.flake8 molo/core/migrations/
    flake8 --config=molo/profiles/migrations/.flake8 molo/profiles/migrations/

[testenv:testapp_lint]
commands =
    ./setup_testapp.sh
    flake8 testapp
